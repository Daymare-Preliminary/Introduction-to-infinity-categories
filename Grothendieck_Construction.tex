\section{Grothendieck Construction}

The reference for this section is \cite[B.1.2, B.1.3]{Elephant_JOH02}.

Let $ A $ be a small 1-category, $ X \colon A^{ \op } \to \Set $ a presheaf.

Recall: 
The category of elements of $ X $ is the category 
$ \int^A X $ with 
\begin{itemize}
	\item 
	objects given by tuples $ ( a \in A , x \in X ( a ) ) $,
	
	\item 
	morphisms given for another tuple $ ( b \in A , y \in X ( b ) ) $
	by a morphism $ f \colon a \to b$ such that $ f^* ( y ) = x $. 
\end{itemize}

\begin{exmp}	
	Consider $ \int^A \Hom_A (- , b ) $.
	The objects are given as $ ( a \in A , x \colon a \to b ) $ 
	and for a second tuple $ ( a' \in A , y \colon a' \to b ) $
	we have morphisms given $ f \colon a \to a' $ such that $ f^* ( y ) = x = y \circ f $.
\end{exmp}

\begin{exmp}	
	Let $ \int^{ A \times A^{ \op }} \Hom_A ( - , - ) $ be the twisted arrow category of $ A $.
	\begin{itemize}
		\item 
		The objects are given as $ ( ( a , b ) \in  A \times A^{\op}, x \colon a \to b ) $,
		
		\item 
		the morphisms are given by tuples $ ( f , g ) $, where $ f \colon a \to a' , g \colon b' \to b $ such that the following square commutes
		\[
		\begin{tikzcd}	
			a'
			\ar[r, " y " ]
			&
			b'
			\ar[d, " g "]
			\\
			a 
			\ar[ u , " f" ]
			\ar[r, " x" ]
			&
			b
		\end{tikzcd}
		\]
		for all objects $ ( ( a' , b' ) \in A \times A^{ \op } , y \colon a' \to b' ), ( ( a , b ) \in A \times A^{ \op }, x \colon a \to b )$.
	\end{itemize}

	Consider the forgetful functor $ \Set_* \xrightarrow{ v } \Set $ where $ \Set_* $ is the category of pointed sets, i.e. objects are given as $ ( X \in \Set, x \in X ) $ and for another object $ ( Y \in \Set, y \in Y ) $ a morphism is given by a morphism of sets $ f \colon X \to Y $, such that $ f ( x ) = y $.
	We can also construct the category of elements of $ X $ as the following pullback
	
	\[
	\begin{tikzcd}
		\int^A X \cong \mathcal{ X }
		\ar[d, " p " ]
		\ar[r]
		&
		\Set_*^{ \op }
		\ar[d, " v^{ \op } "]
		\\
		A
		\ar[r, " X^{ \op } "]
		&
		\Set^{ \op }
	\end{tikzcd}
	\]
	
	the objects of the pullback are given as $ \mathcal{ X } = ( a \in A , ( X_a, x \in X_a )) $, or more explicitely, in terms of the object of the fibered product, a tuple $ ( a \in  A , ( Y , y ) \in \Set_* ; X_a = Y, \text{so } v ( y ) \in X ( a ) ) $, so we have an object $ a $ the fibre $ X_a $ and an element of the fibre $ v ( y ) = x $, which corresponds to above, 
	with morphisms $ f\colon a \to b $ such that $ f^* ( x' ) = x $ for another object $ ( b \in B , ( X_b , x' \in X_b ))$, thus we have the same objects as in the Grothendieck construction, just with the additional, but redundant data, of $ X_a $.
\end{exmp}


\begin{thm}
	The functor $ \int^A \colon \Fun ( A^{ \op } , \Set ) \to \Cat/A $ is fully faithful,
	its essential image consists of the discrete Grothendieck fibrations, i.e. those functors 
	$ \mathcal{ X } \xrightarrow{ p } A $ such that $ \forall x \in \mathcal{ X } $ and $ \forall f \colon a \to b = p ( y) $ there exists a unique $ \varphi \colon x \to y  $ such that $ p( \varphi ) = f $.
\end{thm} 

\begin{Idea}
	Let $ \mathcal{ X } \xrightarrow{ p } Y $ be a discrete Grothendieck fibration of some presheaf $ X \colon A^{ \op } \to \Set $, then we have a pullback square
	\[
	\begin{tikzcd}
		\mathcal{ X }_a 
		\ar[r]
		\ar[d]
		&
		\mathcal{ X }
		\ar[d, " p"]
		\\
		\mathds{ 1 }
		\ar[r]
		&
		A
	\end{tikzcd}
	\]
	where the objects of $ \mathcal{ X }_a $ are given by $ x \in \mathcal{ X } $ such that $ p ( x ) = a $ and morphisms $ \varphi $ such that $ p ( \varphi ) = \id_a $.
	
	
	Uniqueness of lifts yields that $ X \colon A ^{ \op } \to \Set $ is well defined.
\end{Idea}

\begin{defi}
\label{Grothendieck_constr_defi}
	The \textbf{Grothendieck construction} of a 2-functor $ X \colon A^{ \op } \to \underline{\Cat} $ is the 1-category $ \int^A X $ with objects $ ( a \in A , x \in X_a ) $ and for another object $ ( b \in B , y \in X_b )$ morphisms are given by tuples $ ( f , \varphi ) $ such that $ f \colon a \to b $ and $ \varphi \colon x \to f^* ( y ) $.
	
	The composition law in $ \int^A X $ is given as follows
	\[
	\begin{tikzcd}	
		&
		( b \in A , y \in X_b )
		\ar[rd, "{ ( g , \psi ) }"]
		&
		\\
		(a \in A , x \in X_a )
		\ar[ru, "{ ( f , \varphi ) }"]
		\ar[rr, "{ ( gf , \alpha ) }"']
		&&
		( c \in A , z \in X_c )
	\end{tikzcd}
	\]
	where
	\[
		X \xrightarrow{ \varphi } f^* ( y ) \xrightarrow{ f^* ( \psi ) } f^* ( g^* ( z )) \xrightarrow{ \mu } ( gf )^*( z )
	\] 
	and $ \alpha = \mu \circ f^*(\psi ) \circ \varphi $.
\end{defi}

We need to verify that the composition law is associative and unital.
For the identity morphisms it holds that 
\[
	( a \in A , x \in X_a ) \xrightarrow{ ( \id_a , x \xrightarrow{ \epsilon } \id^* ( x ) ) } ( a \in A , x \in X_a ) 
\] 
where 
\[
	\epsilon_a \colon \id_{X_a } \Rightarrow X ( \id_a ) = ( \id_a )^*.
\]

\begin{thm}
	The functor $ \int^A \colon \twoFun ( A^{ \op } , \underline{\Cat } ) \to \Cat /A $ is fully faithful, with essential image the Grothendieck fibrations.
\end{thm}

\begin{exmp}
	Take the functor from $ \Ring $ to $ \Cat $ that takes a ring $ R $ to its module category, we have the following commutative diagram
	\[
	\begin{tikzcd}
		R 
		\ar[r, mapsto]
		\ar[d, "f"]
		&
		\Mod_R
		\ar[d, bend left=60, dashed, " f_! = - \otimes_k S "]
		\ar[d, bend right=70, dashed, " f_* "' ]
		\ar[d, bend left, phantom, " \vdash "]
		\ar[d, bend right=55, phantom, " \vdash "']
		\\ 
		S 
		\ar[r, mapsto]
		&
		\Mod_S
		\ar[u, " f^* "]
	\end{tikzcd}
	\]
\end{exmp}

Let $ X \colon A^{ \op } \to \underline{ \Cat } $ be a 2-functor and $ A $ a small 1-category, as well as $ \underline{ \Cat } $ the strict 2-category of categories.
 
\begin{prop}
	The Grothendieck Construction $ \int^A X $ is a 1-category.
\end{prop}

\begin{proof}
	Consider for the Unitality
	\[
	\begin{tikzcd}
		( a \in A , x \in X_a )
		\ar[rrr, " { ( \id_a , x \xrightarrow{ \epsilon_a } ( \id_a )^* ( x ) ) } " ]
		\ar[rrrd, " h "' ]
		&&&
		( a \in A , x \in X_a )
		\ar[d, " { ( a \xrightarrow{ f } c , x \xrightarrow{ \varphi } f^* ( y ) ) } " ]
		\\
		&&&
		( c \in A , z \in X_c )
	\end{tikzcd}
	\]
	where
	$
	\begin{tikzcd}		
		a
		\ar[r, " \id_* "]
		\ar[rr, bend right, " f "' ]
		&
		a
		\ar[r, " f " ]
		&
		b , x
		\ar[r, " \alpha " ]
		&
		f^* ( y ).
	\end{tikzcd} 
	$
	\[
	\begin{tikzcd}
		( \id_a )^*
		&
		( \id_a )^* ( x )
		\ar[r , " ( \id_a )^* ( \varphi ) "]
		&
		( \id_a )^* ( f^* ( y ) )
		\ar[r, " \mu " , " \sim "']
		&
		( f \circ \id_a )^* ( y ) = f^* ( y )
		\\
		\mathds{ 1 }_{ X_a }
		\ar[ u , Rightarrow, " \epsilon_a " ]
		&
		X
		\ar[u, " ( \epsilon_a )_* "]
		\ar[r, " \varphi "' ]
		&
		f^* ( y ) 
		\ar[u, " { ( \epsilon_a )_{ f^* y } } " ]
		\ar[ru, " \id_{ f^* ( y ) } "' ]
	\end{tikzcd}
	\]
	The right triangle commutes by the definition of $ \epsilon $ and the square by the naturality of $ \epsilon_a $.
	Now for the associativity take the following diagram:
	\[
	\begin{tikzcd}	
		( a \in A , s \in X_a ) 
		\ar[r, " { ( f , u ) } " ]
		\ar[rd, " { ( g \circ f , \mu \circ f^* ( v ) \circ u ) } "' ]
		&
		( b \in A , x \in X_b )
		\ar[d, " {  ( g , v ) } "]
		\ar[rd, " { (  h g , \mu \circ g^* ( v ) \circ u ) } " ]
		\\
		&
		( c \in A , y \in X_c )
		\ar[r , " { ( h , w ) } "']
		&
		( d \in A , z \in X_d )
	\end{tikzcd}
	\]
	The outer two compositions are given by
	\[
	\begin{tikzcd}		
		( a \in A , s \in X_a )
		\ar[rr, bend left, "{ ( hgf , \mu \circ f^* ( \mu g^* ( w ) \circ v ) \circ u )}"]
		\ar[rr, bend right, "{ ( hgf, \mu \circ ( gf )^* ( w ) \circ \mu f^* ( v ) \circ u ) } "']
		&&
		( d \in A , z \in X_d )
	\end{tikzcd}
	\]
	Let us examine these compositions in detail, we have
	\[
		a \xrightarrow{f} b \xrightarrow{g} c \xrightarrow{h} d
	\]
	in $ A $
	and morphisms $ s \xrightarrow{u} f^* ( x ) , x \xrightarrow{v} g^* ( y ) , y \xrightarrow{w} h^* ( z ) $, put together we get the commutative diagram
	\[
	\begin{tikzcd}
		s 
		\ar[r, " u "]
		&
		f^* ( x ) 
		\ar[r, " f^* ( v ) "]
		&
		f^* ( g^* ( y ) )
		\ar[r," \mu "]
		\ar[d," f^* ( g^* ( w )) "]
		&
		( g \circ f )^* ( y ) 
		\ar[d, " { ( g \circ f )^*(w) } "]
		\\
		&&
		f^* ( g^* ( h^* ( z )))
		\ar[r, " \mu "]
		\ar[d," f^* ( \mu ) "]
		&
		( gf )^* (h^* ( z ))
		\ar[d, " \mu "]
		\\
		&&
		f^* (( h g )^*( z ) )
		\ar[r, "\mu"]
		&
		( g f h )^* ( z ) 
	\end{tikzcd}
	\]
	Since the squares commute by the associativity constraint, we get that both compositions are equal and thus the associativity constraint holds.
\end{proof}

\begin{defi}
\label{p-cartesian_defi}
	A morphism $ \varphi \colon Y \to X $ is called p-cartesian if $ \forall g ,  \exists! \rho $ such that 
	\[
	\begin{tikzcd}
		&
		Y
		\ar[rd, " \varphi " ]
		\\
		Z
		\ar[ru, dashed, " \exists! \rho "]
		\ar[rr, " \forall \psi" ]
		&&
		X
	\end{tikzcd}
	\xmapsto{ p }
	\begin{tikzcd}
		&
		p ( Y ) = a 
		\ar[rd, " f = p ( \rho ) " ]
		\\
		p ( Z ) = a'
		\ar[ru, " \forall g "]
		\ar[rr, " h = p ( X ) "' ]
		&&
		b = p ( X ) 
	\end{tikzcd}
	\]
	or equivalently if the following lift exists
	\[
	\begin{tikzcd}	
		\{ 1 \to 2 \}
		\ar[r, hook, " i " ]
		&
		\lambda^2_2
		\ar[r, " F "]
		\ar[d]
		&
		\mathcal{ X }
		\ar[d, " p "]
		\\
		&
		\Delta^2
		\ar[ru, dashed, "\exists ! "]
		\ar[r, " \forall G "]
		&
		A
	\end{tikzcd}
	\]
	where $ F ( i ( 1 \to 2 ) ) = \varphi $.
\end{defi}

\begin{defi}
	A functor of 1-categories $ \mathcal{ X } \xrightarrow{ p } A $ is a Grothendieck fibration.
	If $ \forall X \in \mathcal{ X } , \forall a \xrightarrow{ f } b = p ( X ) $ there exists a morphism $ Y \xrightarrow{ \varphi } X $ in $ \mathcal{ X } $ that is p-cartesian such that $ p ( \varphi ) = f $.
\end{defi}

\begin{defi}
	Let $ \mathcal{ C } $ be a category. 
	A lifting problem in $ \mathcal{ C } $ is a commutative square 
	\[
	\begin{tikzcd}
		A
		\ar[r, "f"]
		\ar[d, "i"]
		&
		X 
		\ar[d, "p"]
		\\
		B
		\ar[r, "g"]
		&
		Y
	\end{tikzcd}	
	\]
	in $ \mathcal{ C } $. 
	A solution to the lifting problem (a lift) is a morphism $ h \colon B \to X $ such that $ p \circ h = q $ and $ h \circ i = f $.
\end{defi}

\begin{prop}
	The functor $ \int^A X \xrightarrow{ p } A $ is a Grothendieck fibration.
\end{prop} 

\begin{proof}
	Let $ Z = ( c \in A , z \in X_c ) \in \int^A X $ be an object and $g \colon b \to p ( z ) = c $ in $ A $ be a morphism in $ A $, then $ g^* \colon X_c \to X_b $ and $ z \mapsto g^* ( z ) $.
	Consider 
	\[
		\psi \coloneqq ( b \in A , g^* ( z ) \in X_b ) 
		\xrightarrow{ ( g , g^* ( z ) \xrightarrow{ \id } g^* ( z ) ) }
		( c \in A , z \in X_c ) = X 
	\]
	\underline{Claim}: $ \psi $ is p-cartesian.
	Take a diagram
	\[
	\begin{tikzcd}
		& 
		b
		\ar[rd, " { g = p ( \psi ) }"]
		\\
		a
		\ar[ru, " \forall f "]
		\ar[rr, " { h = p ( \alpha ) }"']
		&&
		c
	\end{tikzcd}
	\]
	the associated lifting problem is
	\[
	\begin{tikzcd}
		&
		( b \in A , g^* ( z ) \in X_b )
		\ar[rd, "{ ( g , \id_{ g^* ( z ) } = \psi ) }" ] 	
		\\
		( a \in A , x \in X_a )
		\ar[rr, " {\forall ( h , x \isomorphism h^* ( z ) ) = \alpha } "' ]
		\ar[ru, dashed , " { ( f , x \xrightarrow{ u } f^* ( g^* ( z ) ) ) } "]
		&&
		( c \in A , z \in X_c )
	\end{tikzcd}
	\]
	In order for the lifting diagram to commute, we need to construct $ u $ as follows.
	We have the composition
	\begin{align*}
		x \xrightarrow{ u } f^* ( g^* ( z ) ) \xrightarrow{ f^* ( \id_{ g^* } ) } f^* ( g^* ( z ) ) \xrightarrow{ \mu } ( gf )^* ( z )
		\\
		= x \xrightarrow{v} ( g f )^* ( z )  
	\end{align*}
	thus taking $ u = \mu^{ - 1 } \circ v $ works.
\end{proof}


\begin{defi}
\label{isofibration}
	The functor $ \mathcal{ X } \xrightarrow{p} A $ is called an \textbf{isofibration}
	if $ \forall f \colon a \isomorphism p ( x ) = b $ there exists $ Y \xrightarrow{\varphi} X $ an isomorphism in $ \mathcal{ X } $ such that $ p ( \varphi ) = f $.
	That is if there exists a solution to the following lifting problem:
	\[
	\begin{tikzcd}
		\Lambda_0^0
		\ar[r, " x "]
		\ar[d]
		& 
		\mathcal{ X }
		\ar[d, " p "]
		\\
		\Delta^1
		\ar[ru, dashed, " \exists \varphi"]
		\ar[r, " a \xrightarrow{f} p ( x ) "']
		&
		A
	\end{tikzcd}
	\]
\end{defi}

\begin{lem}
	If $ p \colon \mathcal{ X } \to A $ is a Grothendieck fibration then $ p $ is an isofibration.
\end{lem}

\begin{proof}
	Let $ x \in \mathcal{ X } $ and $ f \colon a \isomorphism p ( x ) = b $ an isomorphism in $ A $.
	Choose a p-cartesian lift of $ f $, $ \varphi \colon Y \to X $ in $ \mathcal{ X } $ take a diagram 
	\[
	\begin{tikzcd}
		&
		Y
		\ar[rd, " \varphi "]
		\\
		X
		\ar[ru, dashed, " \exists ! \psi "]
		\ar[rr, " \id_* "']
		&&
		X
	\end{tikzcd}
	\]
	where $ \varphi \circ \psi = \id_x $ and $ p ( \psi ) = g = f^{-1} $, which means we have the following diagram: 
	\[
	\begin{tikzcd}
		&
		a 
		\ar[rd, " f "]
		\\
		b
		\ar[ru, " f^{ - 1 } = g "]
		\ar[rr, " \id_b"']
		&&
		b = p ( x )
	\end{tikzcd}	
	\]
	The following equalities hold 
	\begin{align*}
		\varphi \circ ( \psi \circ \varphi ) = ( \varphi \circ \psi ) \circ \varphi = \varphi \circ \id_x = \varphi 
	\end{align*}
	now since $ p ( \psi ) \circ p ( \varphi ) =  f^{ - 1 } \circ f = \id_a $
	we get by the uniqueness of lifts that $ \psi \circ \varphi = \id_Y $.
	Thus we found a lift that is an isomorphism, which proves the claim.
\end{proof}

Let now $ \mathcal{ X } \xrightarrow{ p } A $ be a Grothendieck fibration and $ X \colon A^{ \op } \to \underline{\Cat} $ a 2-functor
defined by sending each object  $ a $ of $ A $ to the two-pullback $ \mathcal{ X }_a $ along the object $ a $ and $ p \colon \mathcal{ X } \to A $, that is,
\[
\begin{tikzcd}		
	\mathcal{X}_a 
	\ar[r]
	\ar[d]
	&
	\mathcal{X}
	\ar[d,"p"]
	\\
	\mathds{1}
	\ar[r,"a"]
	&
	A
\end{tikzcd}
\]
now for any morphism $ f \colon a \to b $ we obtain a functor $ f^* \colon \mathcal{ X }_b \to \mathcal{ X }_a $.
Let $ x \in \mathcal{ X }_b \xrightarrow{ f^* } \mathcal{ X }_a $
and $ \varphi \colon f^* ( x ) \to x $ in $ \mathcal{X} $ (notice the slight abuse of notation when we identify an object in the fiber with its image in $ \mathcal{ X } $) so that $ p ( \varphi ) = f $, i.e. choose a (p-)cartesian lift $ \varphi $, that exists since $ p $ is a Grothendieck fibration, of $ f \colon a \to b $.
This way we can define $ X $ by sending $ a \in A $ to $ X_a $ 

\subsection{Exercises}

\begin{Exercise}
	A functor $ G \colon \mathcal{ B } \to \mathcal{ C } $ is called an isofibration if for any $ b \in \mathcal{ B } $ and any isomorphism $ f \colon G ( b ) \isomorphism c' $ there is an isomorphism $ f' \colon b \isomorphism b'$ with $ G ( f' ) = f $.
	
	\begin{enumerate}[label=(\alph*)]
		\item 
		Show that the opposite $ G^{ \op } \colon  \mathcal{ B }^{ \op } \to \mathcal{ C }^{ \op } $ of an isofibration $ G \colon \mathcal{ B } \to \mathcal{ C } $ is an isofibration.
		
		\item 
		Show that for a functor $ F \colon \mathcal{ A } \to \mathcal{ C } $ and an isofibration $ G \colon \mathcal{ B } \to \mathcal{ C } $
		the canonical inclusion $ \iota \colon \mathcal{ A } \times_ { \mathcal{ C } } \mathcal{ B } \to \mathcal{ A } \times^{ ( 2 ) }_{ \mathcal{ C } } \mathcal{ B } $ of the pullback in $ \Cat $ to the 2-pullback in $ \underline{ \Cat } $ is an equivalence of categories.
	\end{enumerate}
	
	Recall that in the lecture, we defined a Grothendieck fibration to be a functor $ p \colon \mathcal{ X } \to  A $ such that for any $ x \in \mathcal{ X } $ and any morphism $ f \colon a \to p ( x ) $, $ f $ admits a (p-)cartesian lift $ f' \colon y \to x $ with $ p ( f' ) = f $.
	Here we call a morphism $ f' \colon y \to x $ (p-)cartesian if for any morphism $ g' \colon z \to x $, whenever $ p ( g' ) = p ( f' ) \circ h $ for some $ h \colon p ( z ) \to p ( y ) $, there exists a unique lift $ h' \colon z \to y $ such that $ p ( h' ) = h $ and $ g' = f' \circ h' $.
	
	\begin{enumerate}[resume, label=(\alph*)]
		\item 
		Show that a (p-)cartesian lift of an isomorphism is an isomorphism.
		Conclude that any Grothendieck fibration $ p \colon \mathcal{ X } \to A $ is an isofibration.
		
		\item 
		Conclude that the 2-pullback of a Grothendieck fibration $ p \colon \mathcal{ X } \to  A $ along a functor $ a \colon [ 0 ] \to \mathcal{ A } $ is the fiber $ \mathcal{ X }_a $ of $ p $ at $ a $, i.e. the ordinary pullback along $ a $.
	\end{enumerate}
\end{Exercise}

\begin{Exercise}
	Consider a 2-functor $ F \colon A \to \underline{ \Cat } $ from an ordinary category $ A $ to the 2-category of categories.
	The Grothendieck construction $ \int_A F $ of $ F $ is an ordinary category whose objects are tuples $ ( a , x ) $ of an object $ a \in A $ and objects of the category $ x \in F ( a ) $.
	A morphisms in $ \int_A F $ is a tuple $ ( f , u ) \colon ( a , x ) \to ( b , y ) $
	consisting of a morphism $ f \colon a \to b $ in $ A $ and a morphism $ u \colon F ( f ) ( x ) \to y $ in $ F ( b ) $ where we used that $ F ( f ) \colon F ( a ) \to F ( b ) $ is a functor.
	
	\begin{enumerate}[label=(\alph*)]
		\item 
		Use the additional structure of the 2-functor $ F $ to define a composition law on $ \int_A F $ extending the composition of morphisms in $ A $.
		Specify the identity morphisms and confirm that $ \int_A F $ is a category.
		
		\item 
		Explain why the Grothendieck construction $ \int_A F $ and $ \int^{ A^{ \op } } F $ yield in general different categories.
	\end{enumerate}
	
	A functor $ p \colon \mathcal{ X } \to A $ is called a Grothendieck opfibration if its opposite $ p^{ \op } \colon \mathcal{ X }^{ \op } \to A^{ \op } $ is a Grothendieck fibration.
	
	\begin{enumerate}[resume, label=(\alph*)]
		\item 
		Give the definition of a Grothendieck opfibration without reference to a Grothendieck fibration and cartesian morphisms. 
		Include also a defintion of (p-)cocartesian morphisms.
		
		\item 
		Show that the composition of two (p-)cocartesian morphisms is (p-)cocartesian for some functor $ p \colon \mathcal{ X } \to A $.
		
		\item 
		Show that the canonical forgetful functor $ \int_A F \to  A $ is a Grothendieck opfibration.
	\end{enumerate}
\end{Exercise}

\begin{Exercise}
	Fix a Grothendieck opfibration $ p \colon \mathcal{ X } \to A $.
	We aim to construct a 2-functor $ f_p \colon A \to \underline{ \Cat } $.
	\begin{enumerate}[label=(\alph*)]
		\item 
		Describe the category $ F ( a ) \coloneqq \mathcal{ X }_a $ which is defined as the fibre of $ p $ at $ a $, i.e. the pullback of $ p $ along $ a \colon [ 0 ] \to  A $.
	\end{enumerate}
	
	Using the axiom of choice, we fix for every $ x \in \mathcal{ X } $ and $ f \colon p ( x ) \to b $ a (p-)cocartesian lift $ f_x \colon x \to x_f $.
	
	\begin{enumerate}[resume, label=(\alph*)]
		\item 
		Show that for a fixed morphism $ f \colon a \to b $ in $ A $, the above choices induce a functor $ F ( f ) \colon F ( a ) \to F ( b ) $ with $ F ( f ) ( x ) \coloneqq x_f $ for $ x \in F ( a ) $ and $ F ( f ) ( u ) \coloneqq u_f $ for $ u $ a morphism in $ A $.
		Here $ u_f $ for $ u \colon x \to y $ in $ F ( a ) $ is defined as the unique lift of $ f_y \circ u $ along $ f_x $ induced by $ \id_b $.
		\[
		\begin{tikzcd}
			&
			x_f
			\ar[rd, dashed, "\exists! u_f "]
			\\
			x
			\ar[ru, "f_x"]
			\ar[r, "u"']
			&
			y
			\ar[r,"f_y"']
			&
			y_f
		\end{tikzcd}
		\xrightarrow{ p }
		\begin{tikzcd}
			& 
			b
			\ar[rd, equal]
			\\
			a
			\ar[ru, " f "]
			\ar[r, equal]
			&
			a
			\ar[r, "f"']
			&
			b
		\end{tikzcd}
		\]
		
		\item 
		Deduce from the dual of Exercise 5.1(c) that the collection $\epsilon_a \coloneqq ( ( \id_a )_x )_{x \in F ( a ) } $ is a natural isomorphism
		\[
		\epsilon_a \colon \id_{ F ( a ) } \implies F ( \id_a )
		\]
		for every $ a \in A $.
		
		\item 
		Use Exercise 5.2(d) to construct a natural isomorphism 
		\[
		\mu_{g,f} \colon F ( g ) \circ F ( f ) \implies F ( g \circ f )
		\]
		for any two composable morphisms $ f \colon a \to b $ and $ g \colon b \to c $ in $ A $.
		
		\item 
		Conclude that $ F = ( F , \mu , \epsilon ) \colon A \to \underline{\Cat} $ is a 2-functor.
		(Hint: Deduce from Exercise 4.3(d) that it suffices to show that $ \epsilon_a = \mu_{ \id_a , \id_a } \cdot ( \epsilon_a * \epsilon_a ) $ for all $ a \in A $ and $ \mu_{ hg , f } \cdot ( \mu_{h,g} * \id_f ) = \mu_{ h , gf }  \cdot ( \id_h * \mu_{ g ,f } )$ for three composable morphisms $ f , g , h $ in $ A $.
	\end{enumerate}
\end{Exercise}

\begin{Exercise}
	Consider a pair of functors $ L \colon \mathcal{ C }_0 \to \mathcal{ C }_1 $ and $ R  \colon \mathcal{ C }_1 \to \mathcal{ C }_0 $ and view them as strict 2-functors $ F \coloneqq F_L \colon [ 1 ] \to \underline{ \Cat } $ and $ G \coloneqq G_R \colon [ 1 ]^{ \op } \to \underline{ \Cat } $ where $ [ 1 ] \coloneqq \{ 0 < 1 \} $ is the category with two objects and one morphism between them.
	
	\begin{enumerate}[label=(\alph*)]
		\item 
		Show that the functor $ H \colon \int_{ [ 1 ] } F \to \int^{ [ 1 ] } G $ with constant fibres over $ [ 1 ] $, i.e. $ H ( i , c ) = ( i , c ) $ and $ H ( \id_i , u ) = ( \id_i , u ) $ for $ i \in [ 1 ] $, are in bijection to natural transformations
		\[
		\eta \colon \Hom_{ \mathcal{ C }_1 } ( L ( - ) , ? ) \to \Hom_{ \mathcal{ C }_0 } ( - , R ( ? ) )
		\]
		of functors $ \mathcal{ C }_1^{ \op } \times \mathcal{ C }_0 \to \Set $.
		
		\item 
		Conclude that we have an adjunction $ L \dashv R $ if and only if $ \int_{ [1 ] } F $ and $ \int^{ [ 1 ] } G $ are isomorphic via a functor with constant fibres.
		Deduce in particular that in this case $ \int_{ [ 1 ] } F $ and $ \int^{ [ 1 ] } G $ together with the forgetful functors are isomorphic categories over $ [ 1 ] $.
		
		\item 
		Show that if $ L \dashv R $, then $ p_G \colon \int^{ [ 1 ] } G \to [ 1 ] $ is also a Grothendieck opfibration.
	\end{enumerate}
	
	A functor $ p \colon \mathcal{ X } \to  A $ that is both a Grothendieck fibration and a Grothendieck opfibration is called a Grothendieck bifibration.
	
	\begin{enumerate}[resume, label=(\alph*)]
		\item 
		Explain how a Grothendieck bifibration $ p \colon \mathcal{ X } \to [ 1 ] $ gives rise to a pair of functors $ L \colon \mathcal{ C }_0 \to \mathcal{ C }_1 $ and $ R \colon \mathcal{ C }_1 \to \mathcal{ C }_0 $.
		Furthermore, show that they form an adjoint pair, $ L \dashv R $, by constructing an explicit natural isomorphism $ \eta \colon \Hom_{ \mathcal{ C }_1 } ( L ( - ) , ? ) \to \Hom_{ \mathcal{ C }_2 } ( - , R ( ? ) ) $ for any choice of cleavage.
	\end{enumerate}
\end{Exercise}

\begin{Exercise}
	Let $ \mathcal{ C } $ be a complete category and consider the arrow category $ \Fun ( [ 1 ] , \mathcal{ C } ) $ together with the projection
	\[
		p 
		\coloneqq 
		\ev_1 \colon \Fun ( [ 1 ] , \mathcal{ C } ) \to \mathcal{ C } 
	\]
	given by evaluating at $ 1 \in [ 1 ] $.
	Describe the (p-)cartesian morphisms in $ \Fun ( [ 1 ] , \mathcal{ C } ) $.
	( Recall that pullback squares are also called cartesian squares.) Is $ p $ a Grothendieck fibration?
\end{Exercise}